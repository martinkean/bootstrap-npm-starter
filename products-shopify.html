<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Martin Kean">
    <title>Products from Shopify</title>

</head>
<body>

    <h1>Products from Shopify</h1>

<!-- <script>
    
    function apiCall(query) {
    return fetch('martin-gatsby-shop-netlify-one.myshopify.com/api/graphql.json', {
        method: 'POST',
        headers: {
        'Content-Type': 'application/graphql',
        "Access-Control-Origin": "*",
        'X-Shopify-Storefront-Access-Token': "50d6e7ade3932c7c37b69c28c55f6815"
        },
        "body": query
    }).then(response =>; response.json());
    }
    
    apiCall(query).then(response => {
    console.log(response)
    });

    $(document).ready(function() {
        const $app = $('#app');
        
        getProducts().then(response => {
        
            $app.append("<div class='products'></div>");
            
            const $products = $('.products');
        
            response.data.products.edges.forEach(product => {
            
            const template = `<div class="product">
                    <h2>${product.node.title}</h2>
                    <img alt="${product.node.images.edges[0].node.altText}" src="${product.node.images.edges[0].node.transformedSrc}">
                    <p>${product.node.description}</p>
                    </div>`;
            
            
            $products.append(template);
            });
        });
        
        });

</script> -->

<script>

    // import Client from 'shopify-buy';

    // Initializing a client to return content in the store's primary language
    const client = Client.buildClient({
    domain: 'martin-gatsby-shop-netlify-one.myshopify.com',
    storefrontAccessToken: '50d6e7ade3932c7c37b69c28c55f6815'
    });

    // Initializing a client to return translated content
    const clientWithTranslatedContent = Client.buildClient({
    domain: 'martin-gatsby-shop-netlify-one.myshopify.com',
    storefrontAccessToken: '50d6e7ade3932c7c37b69c28c55f6815',
    language: 'en-NZ'
    });

    // Fetch all products in your shop
    client.product.fetchAll().then((products) => {
    // Do something with the products
    console.log(products);
    });

    // Fetch a single product by ID
    const productId = 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0Lzc4NTc5ODkzODQ=';

    client.product.fetch(productId).then((product) => {
    // Do something with the product
    console.log(product);
    });

    // Fetch a single product by Handle
    const handle = 'product-handle';

    client.product.fetchByHandle(handle).then((product) => {
    // Do something with the product
    console.log(product);
    });

</script>

<script src="http://sdks.shopifycdn.com/js-buy-sdk/v2/latest/index.umd.min.js"></script>

</body>
</html>